---
title: cron表达式
date: 2022-04-18 08:57:30
tags: 表达式
categories: 后台任务作业
---

![img](http://blogimg.hongjy.cn/cron-2131_a4U2o4S.jpg "Cron表达式")

Cron表达式，适用于周期性执行、日常维护、在某时刻需要完成的单次任务等场景。

<!-- more -->

## Cron表达式介绍

Cron表达式是一个具有时间含义的字符串，字符串以5~6个空格隔开，分为6~7个域，格式为`X X X X X X X`。其中`X`是一个域的占位符。最后一个代表年份的域非必须，可省略。单个域有多个取值时，使用半角逗号`,`隔开取值。每个域可以是确定的取值，也可以是具有逻辑意义的特殊字符。每个域最多支持一个前导零。

> **说明** 如指定2022年每天上午8:15执行任务，Cron表达式可指定为`0 15 8 ? * * 2022`或`0 15 08 ? * * 2022`，而不能指定为`0 15 008 ? * * 2022`。



## 在线工具

[Cron - 在线Cron表达式生成器 (ciding.cc)](http://cron.ciding.cc/)



## 域取值

下表为Cron表达式中六个域能够取的值以及支持的特殊字符。

| 域   | 是否必需 | 取值范围                                                     | 特殊字符      |
| :--- | :------- | :----------------------------------------------------------- | :------------ |
| 秒   | 是       | [0, 59]                                                      | * , - /       |
| 分钟 | 是       | [0, 59]                                                      | * , - /       |
| 小时 | 是       | [0, 23]                                                      | * , - /       |
| 日期 | 是       | [1, 31]                                                      | * , - / ? L W |
| 月份 | 是       | [1, 12]或[JAN, DEC]                                          | * , - /       |
| 星期 | 是       | [1, 7]或[MON, SUN]。若您使用[1, 7]表达方式，`1`代表星期一，`7`代表星期日。 | * , - / ? L # |
| 年   | 否       | [当前年份，2099]                                             | * , - /       |



## 特殊字符

Cron表达式中的每个域都支持一定数量的特殊字符，每个特殊字符有其特殊含义。

| 特殊字符 | 含义                                                         | 示例                                                         |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `*`      | 所有可能的值。                                               | 在月域中，`*`表示每个月；在星期域中，`*`表示星期的每一天。   |
| `,`      | 列出枚举值。                                                 | 在分钟域中，`5,20`表示分别在5分钟和20分钟触发一次。          |
| `-`      | 范围。                                                       | 在分钟域中，`5-20`表示从5分钟到20分钟之间每隔一分钟触发一次。 |
| `/`      | 指定数值的增量。                                             | 在分钟域中，`0/15`表示从第0分钟开始，每15分钟。在分钟域中`3/20`表示从第3分钟开始，每20分钟。 |
| `?`      | 不指定值，仅日期和星期域支持该字符。                         | 当日期或星期域其中之一被指定了值以后，为了避免冲突，需要将另一个域的值设为`?`。 |
| `L`      | 单词Last的首字母，表示最后一天，仅日期和星期域支持该字符。**说明** 指定`L`字符时，避免指定列表或者范围，否则，会导致逻辑问题。 | 在日期域中，`L`表示某个月的最后一天。在星期域中，`L`表示一个星期的最后一天，也就是星期日（`SUN`）。如果在`L`前有具体的内容，例如，在星期域中的`6L`表示这个月的最后一个星期六。 |
| `W`      | 除周末以外的有效工作日，在离指定日期的最近的有效工作日触发事件。`W`字符寻找最近有效工作日时不会跨过当前月份，连用字符`LW`时表示为指定月份的最后一个工作日。 | 在日期域中`5W`，如果5日是星期六，则将在最近的工作日星期五，即4日触发。如果5日是星期天，则将在最近的工作日星期一，即6日触发；如果5日在星期一到星期五中的一天，则就在5日触发。 |
| `#`      | 确定每个月第几个星期几，仅星期域支持该字符。                 | 在星期域中，`4#2`表示某月的第二个星期四。                    |



## 取值示例

以下为Cron表达式的取值示例。

| 示例                          | 说明                                                         |
| :---------------------------- | :----------------------------------------------------------- |
| `0 15 10 ? * *`               | 每天上午10:15执行任务                                        |
| `0 15 10 * * ?`               | 每天上午10:15执行任务                                        |
| `0 0 12 * * ?`                | 每天中午12:00执行任务                                        |
| `0 0 10,14,16 * * ?`          | 每天上午10:00点、下午14:00以及下午16:00执行任务              |
| `0 0/30 9-17 * * ?`           | 每天上午09:00到下午17:00时间段内每隔半小时执行任务           |
| `0 * 14 * * ?`                | 每天下午14:00到下午14:59时间段内每隔1分钟执行任务            |
| `0 0-5 14 * * ?`              | 每天下午14:00到下午14:05时间段内每隔1分钟执行任务            |
| `0 0/5 14 * * ?`              | 每天下午14:00到下午14:55时间段内每隔5分钟执行任务            |
| `0 0/5 14,18 * * ?`           | 每天下午14:00到下午14:55、下午18:00到下午18:55时间段内每隔5分钟执行任务 |
| `0 0 12 ? * WED`              | 每个星期三中午12:00执行任务                                  |
| `0 15 10 15 * ?`              | 每月15日上午10:15执行任务                                    |
| `0 15 10 L * ?`               | 每月最后一日上午10:15执行任务                                |
| `0 15 10 ? * 6L`              | 每月最后一个星期六上午10:15执行任务                          |
| `0 15 10 ? * 6#3`             | 每月第三个星期六上午10:15执行任务                            |
| `0 10,44 14 ? 3 WED`          | 每年3月的每个星期三下午14:10和14:44执行任务                  |
| `0 15 10 ? * * 2022`          | 2022年每天上午10:15执行任务                                  |
| `0 15 10 ? * * *`             | 每年每天上午10:15执行任务                                    |
| `0 0/5 14,18 * * ? 2022`      | 2022年每天下午14:00到下午14:55、下午18:00到下午18:55时间段内每隔5分钟执行任务 |
| `0 15 10 ? * 6#3 2022,2023`   | 2022年至2023年每月第三个星期六上午10:15执行任务              |
| `0 0/30 9-17 * * ? 2022-2025` | 2022年至2025年每天上午09:00到下午17:30时间段内每隔半小时执行任务 |
| `0 10,44 14 ? 3 WED 2022/2`   | 从2022年开始，每隔两年3月的每个星期三下午14:10和14:44执行任务 |



## 相关文档

[Cron - 维基百科，自由的百科全书 (wikipedia.org)](https://zh.wikipedia.org/wiki/Cron)

[cron表达式详解 - 沧海一粟hr - 博客园 (cnblogs.com)](https://www.cnblogs.com/javahr/p/8318728.html)

[Cron表达式 (aliyun.com)](https://help.aliyun.com/document_detail/64769.html)
